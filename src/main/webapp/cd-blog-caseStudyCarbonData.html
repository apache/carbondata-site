<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href='images/favicon.ico' rel='shortcut icon' type='image/x-icon'>
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>CarbonData</title>

    <!-- Bootstrap -->
  
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link href="css/style.css" rel="stylesheet">      
    <link href="css/print.css" rel="stylesheet" >   
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <header>
     <nav class="navbar navbar-default navbar-custom cd-navbar-wrapper" >
      <div class="container">
        <div class="navbar-header">
          <button aria-controls="navbar" aria-expanded="false" data-target="#navbar" data-toggle="collapse" class="navbar-toggle collapsed" type="button">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a href="index.html" class="logo">
             <img src="images/CarbonDataLogo.png" alt="CarbonData logo" title="CarbocnData logo"  />      
          </a>
        </div>
        <div class="navbar-collapse collapse cd_navcontnt" id="navbar">         
           <ul class="nav navbar-nav navbar-right navlist-custom">
              <li><a href="index.html" class="hidden-xs"><i class="fa fa-home" aria-hidden="true"></i> </a></li>
              <li><a href="index.html" class="hidden-lg hidden-md hidden-sm">Home</a></li>
              <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Download <span class="caret"></span></a>
                  <ul class="dropdown-menu">
                      <li><a href="https://cwiki.apache.org/confluence/display/CARBONDATA/Apache+CarbonData+1.0.0-incubating"  target="_blank">Apache CarbonData 1.0.0</a></li>
                      <li><a href="https://cwiki.apache.org/confluence/display/CARBONDATA/Apache+CarbonData+0.2.0-incubating+Released"  target="_blank">Apache CarbonData 0.2.0</a></li>
                      <li><a href="https://cwiki.apache.org/confluence/display/CARBONDATA/Apache+CarbonData+0.1.1-incubating+released"  target="_blank">Apache CarbonData 0.1.1</a></li>
                      <li><a href="https://cwiki.apache.org/confluence/display/CARBONDATA/Apache+CarbonData+0.1.0-incubating+released"  target="_blank">Apache CarbonData 0.1.0</a></li>
                      <li><a href="https://cwiki.apache.org/confluence/display/CARBONDATA/Releases"  target="_blank">Release Archive</a></li>
                    </ul>
                </li>
                <li><a href="docs/latest/mainpage.html" class="">Documentation</a></li>
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Community <span class="caret"></span></a>                  
                  <ul class="dropdown-menu">
                    <li><a href="contributingDoc.html">Contributing to CarbonData</a></li>
                    <li><a href="contributingDoc.html#Mailing_List">Mailing Lists</a></li>
                    <li><a href="contributingDoc.html#Apache_Jira">Issue Tracker</a></li>
                    <li><a href="contributingDoc.html#Committers">Project Committers</a></li>
                    <li><a href="jenkins.html">Jenkins  for Apache CarbonData</a></li>
                    <li><a href="meetup.html">CarbonData Meetups </a></li>
                  </ul>
                </li>
                <li class="dropdown">
                  <a href="http://www.apache.org/" class="apache_link hidden-xs dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Apache</a>
                   <ul class="dropdown-menu">
                      <li><a href="http://www.apache.org/"  target="_blank">Apache Homepage</a></li>
                      <li><a href="http://www.apache.org/licenses/"  target="_blank">License</a></li>
                      <li><a href="http://www.apache.org/foundation/sponsorship.html"  target="_blank">Sponsorship</a></li>
                      <li><a href="http://www.apache.org/foundation/thanks.html"  target="_blank">Thanks</a></li>                      
                    </ul>
                </li>
                <li class="dropdown">
                  <a href="http://www.apache.org/" class="hidden-lg hidden-md hidden-sm dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Apache</a>
                   <ul class="dropdown-menu">
                      <li><a href="http://www.apache.org/"  target="_blank">Apache Homepage</a></li>
                      <li><a href="http://www.apache.org/licenses/"  target="_blank">License</a></li>
                      <li><a href="http://www.apache.org/foundation/sponsorship.html"  target="_blank">Sponsorship</a></li>
                      <li><a href="http://www.apache.org/foundation/thanks.html"  target="_blank">Thanks</a></li>                      
                    </ul>
                </li>
           </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
     </header> <!-- end Header part -->
   
   <div class="fixed-padding"></div> <!--  top padding with fixde header  -->
 
   <section><!-- Dashboard part --> 
        <div class="container-fluid"> 
            <div class="col-md-12 col-sm-12">
                <div class="blog-content">
                     <h1 class="title-heading">Case Study of CarbonData (Query)
                        <span class="title-underline"></span> 
                     </h1>

                     <p>In this era of BigData, traditional data processing applications are inadequate to deal with the challenges of analysis, capture, data curation, search, sharing, storage, transfer, visualization, querying, updating, and information privacy.</p>

                     <p>In most of our applications we are gathering data from various sources like  transactional data derived from userâ€™s interactions with the application, data collected from machine sensors, sales data, data from social media or collected results of scientific experiments. These data can be structured like SQL database store or JSON data, as well as unstructured data like documents and streaming data from sensors. Since this data is being generated constantly over a period of time the data become enormous and special techniques are needed to handle this amount of data.</p>

                     <p>For us as an organization this data is very important as it gives insight into a lot of things e.g. root  causes of failures, user habits, frauds, sales figures , geographies , service disruption etc.. But this data is totally useless if we can not analyse this data quickly and draw conclusions. Hence analysing this data has become prime need for us.</p>

                     <p>This need have resulted in a slew of open source innovation in Big Data tools and technologies to collect, store and analyse the high volume, high velocity and high veracity of data.  There are various tools available in the open source that helps us to store and ingest huge amount of data (In petabytes) as well as analysis on them by executing different set of queries like Analytical Query, Batch Query, Operational Query and so on.</p>

                     <p>Most often our use cases define which specific set of data we need and then we will write different kind of queries for the same. Some examples of Use Cases and queries needed to get data for these Use cases are as follow </p>
                     <ol>
                        <li><strong>Operational Queries (Random Access)</strong>:  In an E-Commerce application we want to display all the orders placed by a particular user (see Figure 1).

                         <p>
                          <img src="images/format/Orders.png" alt="" />
                         </p>

                         <br />
                        In this case there may be million of rows but we are mainly focused on data for our current logged in user, so we are interested in a specific set of rows that meet the criteria (user_id == <current_user>) . These kinds of queries are Operational Queries which involved certain rows based on a particular filter.  In big data world HBASE is one of the technologies that is being used for these kind of queries.
                         </li>
                        <li><strong>Batch Queries (Sequential Access)</strong>: In the same E-Commerce Application we want to generate a report which contains the number of orders per user, the amount of money spent by that user, number of returns, number of coupons used and monthly orders (see Figure 2). For this use case we have to access all the rows and then aggregate or reduce the data to generate a report.
                          <p>
                          <img src="images/format/monthlyOrders.png" alt="" />
                          </p>
                           <br />
                           Most of the Business Intelligence (BI) tools execute these queries. Earlier we used to use the Data Warehouse technology  which was specifically developed for these needs in relational world. So in Batch Queries we are focused on the data from all or majority of rows, the number of columns involved might only be few. Apache Hive is quite popular for these kinds of queries.      

                        </li>
                        <li> <strong> Interactive Analysis Queries (OLAP Queries) </strong>: Taking an example of same application we have a need to provide analysis regarding Users, Items, Sales, Warehouse Inventory for the Items, Sizes Available, Vendor Information and so on (see Figure 3). In this use case we need to query multiple tables, filter multiple columns as well as have aggregate functions or nested queries. Such queries are often generated by Interactive Analysis tools like Tableau, PentaHo. Even for graph databases which provide excellent fast retrieval of OLTP queries we have to use a Big Data tool for OLAP. There are a lot of tools available in the market for these kinds of queries like Apache Impala and Apache Kylin.
                         <p>
                           <img src="images/format/SalesReport.png" alt="" />                         
                         </p>
                        </li>
                    </ol>                      
                    

                    <h2>Challenges Faced</h2>
                     <p>As you observe in the above section there is a specific tool available for these kind of queries and we can use them to solve the problems so what is the issue here?  </p>
                     <p>Primarily these are the challenges that we faced.  </p>
                     <ul>
                        <li>Different tool needed for different type of queries e.g. HBASE is suited for random access queries and Hive for batch queries.</li>
                        <li> Data replication: Deploying multiple datastores/engines means that the same data has to be stored in all these engines.</li>
                        <li> High Cost: Since we are replicating the data to meet our generic needs there is a whole lot of overhead that we are bearing in terms of storage, processing power as well as maintenance that adds to the cost. </li>
                        <li> Maintenance: Managing and maintaining all the different frameworks is quite a headache. </li>
                        <li> Excessive IO scans and excessive utilization of CPU resources in above mentioned frameworks which de-accelerated the query performance by several times.  </li>
                        <li> Space optimization and querying on encoded data without decoding the data until the last stage was another challenge. </li>
                        <li>Reducing the row construction cost. </li>
                    </ul>

                    <p>So we researched about a solution that can define a  Data format for all our specific needs and all type of queries can be executed on the same framework with same efficiency.   
                    </p>
                     <h2>Is CarbonData the solution ?</h2>
                     <p>CarbonData was envisaged to solve this problem, it provides a way to create a single data format for all kind of queries and analysis on Big Data. Apache CarbonData can provide blazing fast performance for any query scenario described above using a single storage format. What makes CarbonData so special is, its storage format, which is designed and developed from the ground up to provide fast response for any query scenario.</p>
                     <p>
                      Older file formats like Parquet and ORC in the Hadoop eco-system fail to cater equal efficiency to all domains of query like OLAP, Sequential and Random. While working with these two, we found them to be working suitably for big scans. Also they support HDFS to allow levering of existing Hadoop Cluster, but they have been found to be unsuitable in providing the sub second responses for primary key lookups, Olap style queries over big data involving filters and fetching of all columns of record. For Primary Key based fetching we will need to have indexes and that is one of the key features of CarbonData. </p>
                   
                   
                     <p>Following are the prominent features of CarbonData.</p>
                     <ul>
                        <li> <strong>Global Dictionary with Deferred Decoding</strong>:- Allows the query engine to perform computations such as Group BY/Aggregation and Sort using encoded values without having to decode each and every row. The decoding needs to be done only for the final query result which in most cases contains much less rows than the scanned data. This helps in Batch queries and Interactive queries. 
                        </li>
                        <li> <strong>Index (MDK,Min-Max,Inverted Index)</strong>:- Enables the scanner to quickly locate the required rows without having to read and compare each and every row against the query predicates(filters). This saves a lot in I/O bandwidth and time. This helps in Interactive Queries and Operational Queries.</li>
                        <li><strong>Column Groups</strong>:-Enables CarbonData to provide row-store like query performance for wide table queries in spite of CarbonData being a columnar data storage format. It helps eliminate the implicit join which is otherwise required to reconstruct rows from columnar storage format. This helps in making Operational Queries several magnitude faster.</li>
                       <li><strong>Advanced Push Down Optimizations</strong>: Carbon pushes as much of query processing as possible close to the data to minimize the amount of data being read, processed, converted and transmitted/shuffled.

                             <ul>
                              <li><strong>Projection and Filters</strong>: Since carbon uses columnar format, it reads only the required columns from the store and also reads only the rows that match the filter conditions provided in the query.</li>

                             </ul>


                        </li>
                    </ul>

                    <h2>CarbonData Performance </h2>
                    <p>Following figures show comparison of other tools with Carbon Data:-
                      <p>
                        <img src="images/format/Performance.png" alt="" />                         
                      </p>
                        <p>
                          <img src="images/format/PerformanceObserve.png" alt="" /> 
                        </p>
                                   </p>

                    <h2>Current Users of CarbonData </h2>
                    <p>Hulu is one of the first users of CarbonData, It is a North American video industry Internet Company. They have switched over CarbonData to speed up their systems by utilising the features of CarbonData. They filter out 2% to 5% of data for aggregation, the filters are majority based on 5 to 10 columns and the result set has 100+ columns. The finger grained index, columnar groups provided in CarbonData render speedier results than Parquet/ ORC in this Use Case.  
                     </p>
                                   

                    <h2>Conclusion</h2>
                    <p>CarbonData provides features that are very useful to us like low latency, space efficiency, rapid processing and intelligent solutions to BigData problems. CarbonDataâ€™s indexing significantly accelerates query performance and reduces the I/O scans and CPU resources, where there are filters in the query. CarbonData index consists of multiple level of indices allowing a processing framework to leverage on these  index(s) to reduce the task it needs to schedule and process, and also supports skip scan in more finer grain unit (called blocklet) in task side scanning instead of scanning the whole file. CarbonData by supporting efficient compression and global encoding schemes, allows queries on compressed/encoded data, the data can be converted just before returning the results to the users, which is "late materialized". It allow multiple columns to form a column group that would be stored as row format. This reduces the row reconstruction cost at query time. </p>              



                  </div>
                </div>
            </div>     
   </section><!-- End Dashboard part -->


  <footer>
    <div class="topcontant">
      <div class="container-fluid">
          <div class="col-md-4 col-sm-4">
            <p class="footext">
              Apache CarbonData, CarbonData, Apache, the Apache feather logo, and the Apache CarbonData project logo are trademarks of The Apache Software Foundation
            </p>
 
          </div>
          <div class="col-md-8 col-sm-8">
             <ul class="footer-nav">
              <li><a href="">Site Map</a></li>
              <li><a href="">Service</a></li>
              <li><a href="">Contact us</a></li>
             </ul>
          </div>
       </div>
    </div>
    <div class="bottomcontant">
       <div class="container-fluid">
          <div class="col-md-8 col-sm-8">
            <p class="copyright-txt">Copyright Â© 2016. All rights reserved  &nbsp;&nbsp;|&nbsp;&nbsp;
              <a href="http://www.apache.org/" class="term-links">Apache Software Foundation  </a>&nbsp;&nbsp;| &nbsp;&nbsp;
               <a href="http://www.apache.org/foundation/policies/privacy.html" class="term-links" target="blank"> Privacy Policy </a>
            </p>

          </div>
          <div class="col-md-4 col-sm-4">
                 <div class="social-icon">
                  <a href="#" class="icons"><i class="fa fa-facebook" aria-hidden="true"></i></a>
                  <a href="#" class="icons"><i class="fa fa-twitter" aria-hidden="true"></i></a>
                  <a href="#" class="icons"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
                 </div>
          </div>
    </div>
     </div>

  </footer>



  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->

    <script src="js/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>    
    <script src="js/custon.js"></script>
  </body>
  </html>